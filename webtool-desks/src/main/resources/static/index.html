<!doctype html>
<html>
<head>
    <title>webapp: desks</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="FileSaver.js"></script><!-- TODO: more sophisticated way -->
    <script src="app.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
</head>
<body ng-app="desksApp">
<div ng-controller="DesksController as vm">
    <h3>Desks</h3>
    <div class="styled-g">
        <div class="styled-gc-2-3">
            <form class="styled-form" ng-submit="false">
                <table class="styled-table" style="width: 100%">
                    <thead>
                        <tr>
                            <th>a</th>
                            <th>b</th>
                            <th>width</th>
                            <th>edges</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="desk in vm.model.desks">
                            <td><input type="number" placeholder="a" min="1" max="10000" step="1" ng-model="desk.a" required /></td>
                            <td><input type="number" placeholder="b" min="1" max="10000" step="1" ng-model="desk.b" required /></td>
                            <td><input type="number" placeholder="width" min="0" max="1000" step="1" ng-model="desk.width" required /></td>
                            <td>
                                <input type="checkbox" ng-model="desk.edges[0]" />
                                <input type="checkbox" ng-model="desk.edges[1]" />
                                <input type="checkbox" ng-model="desk.edges[2]" />
                                <input type="checkbox" ng-model="desk.edges[3]" />
                            </td>
                            <td>
                                <button type="button" ng-click="vm.removeDesk($index)">X</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="buttons">
                    <button type="button" ng-click="vm.addDesk()">Add desk</button>
                    <button class="secondary" type="button" ng-click="vm.generateSVG()">Generate SVG</button>
                    <button class="primary" type="button" ng-click="vm.generatePDF()">Generate PDF</button>
                </div>
                <div class="extra-options">
                    <span>
                        <label for="title">Title</label>
                        <input id="title" ng-model="vm.model.documentTitle" />
                    </span>
                    <span>
                        <label for="header">Header</label>
                        <input id="header" ng-model="vm.model.pageHeader" />
                    </span>
                    <span>
                        <label for="footer">Footer</label>
                        <input id="footer" ng-model="vm.model.pageFooter" />
                    </span>
                </div>
            </form>
        </div>
        <div style="font-size: 0.67em" class="styled-gc-1-3">
            <div class=" content-box">
                <div class="overlay top right">
                    <input type="checkbox" ng-model="vm.formattedPreview" id="formattedPreview"/>
                    <label for="formattedPreview">Formatted preview</label>
                </div>
                <pre ng-if="!vm.formattedPreview">{{vm.model}}</pre>
                <pre ng-if="vm.formattedPreview">{{vm.model | json}}</pre>
            </div>
        </div>
    </div>
</div>
</body>
</html>